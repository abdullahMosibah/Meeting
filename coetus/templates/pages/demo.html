{% extends 'base.html' %}
{% load static %}
{% block content %}
  <style>

    .files-section {
      border: black solid;
      border-radius: 30px;
      background-color: #1fcccc;
    }

  </style>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.js"></script>
  <script crossorigin src="https://unpkg.com/@daily-co/daily-js"></script>
  <div id="start" class="row justify-content-center mt-5">
    <button class=" mt-5 btn btn-primary btn-lg" onclick="run()">Start</button>
  </div>
  <div class="container-fluid">
    <div class="row">
      <div class="col-6">
        <div class="row">
          <div class="col-12 files-section py-1 px-1">
            <div class="row">
                {% for file in files %}
                  <div class="col mx-1 text-center ">
                    <a href="{{ file.content.url }}">
                      <img class="" style="width: 80px; height: 100px;" src="{% static 'images/file.svg' %}">
                      <p class="text-center">{{ file.content.name }}</p>
                    </a>
                  </div>
                  <div id="pdf">

                  </div>
                  <script>PDFObject.embed("{{file.content.url}}", "#pdf");</script>
                {% endfor %}
            </div>
          </div>


          <!--<iframe src="https://docs.google.com/gview?url=https://path.com/to/your/pdf.pdf&embedded=true" style="width:600px; height:500px;" frameborder="0"></iframe>
        -->
        </div>
      </div>
      <div class="col-6" id="iframe-wrapper">

      </div>

    </div>
  </div>
  <style>
  </style>
  <script>
      function showEvent(e) {
          console.log("video call event -->", e);
      }


      async function run() {
          $(start).css('display', 'none')
          room = {url: 'https://coetus.daily.co/hello'}
          callFrame = window.DailyIframe.createFrame(document.getElementById('iframe-wrapper'), {
              iframeStyle: {
                  position: 'relative',
                  width: '100%',
                  height: '500px'
              }
          });
          callFrame.join({url: 'https://coetus.daily.co/hello'});
          await callFrame.join({url: room.url});


      }

      /*
        callFrame = window.DailyIframe.createFrame(
            {
                showLeaveButton: true,
                iframeStyle: {
                    position: 'fixed',
                    width: '50%',
                    height: '100%'
                }
            }
        );
        callFrame.join({url: 'https://coetus.daily.co/hello'})
    */
  </script>

{% endblock %}
